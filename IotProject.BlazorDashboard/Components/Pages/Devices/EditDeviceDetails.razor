@inject IotDeviceService DeviceService

@if (EditName)
{
	<Modal @ref="modal" Title="Edit device name">
		<BodyTemplate>
			<EditForm Model="requestNameModel" OnValidSubmit="HandleEditName">
				<TextInput Id="EditedName" @bind-Value="requestNameModel.Name" Placeholder="Name" />
			</EditForm>
		</BodyTemplate>
		<FooterTemplate>

		</FooterTemplate>
	</Modal>
}

@code {
	[Parameter] public string DeviceId { get; set; }
	[Parameter] public bool EditName { get; set; } = false;
	[Parameter] public bool EditRoom { get; set; } = false;

	private DeviceResponse? device;
	private DeviceNameRequest requestNameModel;
	private Modal modal = default!;

	// protected override async Task OnAfterRenderAsync(bool firstRender)
	// {
	// 	device = await DeviceService.GetDevice(DeviceId);
	// }

	private async Task HandleEditName()
	{
		requestNameModel.Id = DeviceId;
		var response = await DeviceService.EditDeviceName(requestNameModel);
		if (!response)
		{
			Console.WriteLine("Success!!!!");
		}
		else
		{
			Console.WriteLine("Fail");
		}
	}

	public async Task OnShowModalClick()
	{
		await modal.ShowAsync();
	}

	public async Task OnHideModalClick()
	{
		await modal.HideAsync();
	}
}